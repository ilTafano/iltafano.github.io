function formatDate(e){return new Date(e).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"})}function createContentCard(e,n,a=!1){const t=a?" italic":"",i=formatDate(e.date),r=e.images&&e.images.length>0?e.images[0].url:null,o=r?`style="background-image: url('${r}'); background-size: cover; background-position: center;"`:"";return`\n        <a href="${createInternalLink(n+"/"+e.id)}" class="content-card" data-link>\n            <div class="card-inner">\n                <p class="card-topic">${e.topic}</p>\n                <div class="card-image" ${o}></div>\n                <h2 class="card-title${t}">${e.title}</h2>\n                <p class="card-subtitle${t}">${e.subtitle}</p>\n                <div class="card-separator"></div>\n                <p class="card-author"><em>di ${e.author}</em></p>\n                <p class="card-date">${i}</p>\n            </div>\n        </a>\n    `}function createArticlesList(e,n,a="",t=!1){let i=e;if(a){const n=a.toLowerCase();i=e.filter(e=>e.title.toLowerCase().includes(n)||e.subtitle.toLowerCase().includes(n)||e.topic.toLowerCase().includes(n)||e.author.toLowerCase().includes(n)||e.date.toLowerCase().includes(n)||formatDate(e.date).toLowerCase().includes(n))}return 0===i.length?'<p class="no-results">Nessun risultato trovato.</p>':i.map(e=>createContentCard(e,n,t)).join("")}function createSearchBar(){return'\n        <div class="search-bar">\n            <div class="search-container">\n                <input \n                    type="text" \n                    class="search-input" \n                    placeholder="Titolo, autore, data..."\n                    id="searchInput"\n                >\n                <button class="search-btn" id="searchBtn" aria-label="Cerca">\n                    \x3c!-- Icona di default: lente di ricerca --\x3e\n                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                        <circle cx="11" cy="11" r="8"></circle>\n                        <path d="m21 21-4.35-4.35"></path>\n                    </svg>\n                    \x3c!-- Icona di cancellazione: X (nascosta di default) --\x3e\n                    <svg class="clear-icon" style="display: none;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                        <path d="M18 6 6 18"></path>\n                        <path d="m6 6 12 12"></path>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    '}function createTopicFilter(e){return`\n    <div class="topic-filter">\n      <div class="topic-filter-scroll">\n        ${[...new Set(e.map(e=>e.topic))].sort().map(e=>`<button class="topic-chip" data-topic="${e}">${e}</button>`).join("")}\n      </div>\n    </div>\n  `}function createHomePage(){return"\n        <div class=\"page-container\">\n            <div class=\"intro-text\">\n        <h2>Manifesto</h2>\n                <p>\n            [...]νῦν οὖν, ὦ ἄνδρες Ἀθηναῖοι, πολλοῦ δέω ἐγὼ ὑπὲρ ἐμαυτοῦ\n            ἀπολογεῖσθαι, ὥς τις ἂν οἴοιτο, ἀλλὰ ὑπὲρ ὑμῶν, μή τι ἐξαμάρτητε\n            περὶ τὴν τοῦ θεοῦ δόσιν ὑμῖν ἐμοῦ καταψηφισάμενοι. ἐὰν γάρ με\n            ἀποκτείνητε, οὐ ῥᾳδίως ἄλλον τοιοῦτον εὑρήσετε, ἀτεχνῶς - εἰ καὶ\n            γελοιότερον εἰπεῖν - προσκείμενον τῇ πόλει ὑπὸ τοῦ θεοῦ ὥσπερ ἵππῳ\n            μεγάλῳ μὲν καὶ γενναίῳ, ὑπὸ μεγέθους δὲ νωθεστέρῳ καὶ δεομένῳ\n            ἐγείρεσθαι ὑπὸ μύωπός τινος, οἷον δή μοι δοκεῖ ὁ θεὸς ἐμὲ τῇ πόλει\n            προστεθηκέναι τοιοῦτόν τινα, ὃς ὑμᾶς ἐγείρων καὶ πείθων καὶ\n            ὀνειδίζων ἕνα ἕκαστον οὐδὲν παύομαι τὴν ἡμέραν ὅλην πανταχοῦ\n            προσκαθίζων. τοιοῦτος οὖν ἄλλος οὐ ῥᾳδίως ὑμῖν γενήσεται, ὦ ἄνδρες,\n            ἀλλ' ἐὰν ἐμοὶ πείθησθε, φείσεσθέ μου· ὑμεῖς δ' ἴσως τάχ' ἂν\n            ἀχθόμενοι, ὥσπερ οἱ νυστάζοντες ἐγειρόμενοι, κρούσαντες ἄν με,\n            πειθόμενοι Ἀνύτῳ, ῥᾳδίως ἂν ἀποκτείναιτε, εἶτα τὸν λοιπὸν βίον\n            καθεύδοντες διατελοῖτε [...]</p>\n                <p><em>\n              ... ora dunque, cittadini ateniesi, io sono ben lontano dal parlare in mia\n              difesa, come qualcuno potrebbe supporre, ma sto parlando per voi,\n              perché non siate in errore su ciò che il dio vi ha dato,\n              condannando me. Se così faceste infatti, non troverete facilmente\n              un altro che - anche se è un po’ ridicolo a dirsi - sia stato\n              posto dal dio accanto alla città come ad un grande e nobile\n              cavallo, ma troppo pigro a causa della sua stazza e bisognoso di\n              essere destato da un qualche tafano. Perché mi sembra che il dio\n              abbia posto me sulla città con questa funzione: non smettere di\n              starvi addosso tutto il giorno e dovunque per stimolare,\n              convincere ed ammonire tutti voi, uno per uno. <br />\n              O uomini, non ci sarà facilmente per voi un altro di tal genere,\n              ma se ragionerete nel senso di ciò che io vi dico allora non mi\n              condannerete. D’altra parte può darsi che voi, irati come coloro\n              che dormono sonni profondi quando vengono svegliati di\n              soprassalto, dando retta ad Anito, mi condanniate agilmente a morte\n              percuotendomi per poi continuare a dormire per il resto della\n              vostra vita ... \n                </em><br><br><em>-Platone, Apologia di Socrate</em></p>\n                <hr>\n                <br>\n                <p>\n                  Il Tafano è un giornale di controcultura crepuscolare, nato per dare voce a chi ha qualcosa da dire. \n                  Non siamo interessati alla quantità o alla viralità, ma alla sostanza e all'autenticità. \n                  Il nostro obiettivo è creare uno spazio dove le idee possano volare libere, senza filtri o compromessi.\n                </p>\n                <p>\n                  Crediamo nel potere della cultura di trasformare le persone e la società, e vogliamo essere un piccolo ma costante stimolo in questa direzione. \n                  Non ci interessa seguire le mode o rincorrere i trend, ma piuttosto coltivare un dialogo sincero e profondo con i nostri lettori.\n                </p>\n                <p>\n                  Il Tafano è un progetto indipendente e controtendente, senza padrini politici o padroni economici.\n                </p>\n            </div>\n        </div>\n    "}function createArticlesPage(){return`\n        <div class="articles-page">\n            ${createSearchBar()}\n            ${createTopicFilter(ARTICLES)}\n            <div class="articles-list" id="articlesList">\n                ${createArticlesList(ARTICLES,"/articoli")}\n            </div>\n        </div>\n    `}function createPublicationsPage(){return`\n        <div class="publications-page">\n            ${createSearchBar()}\n            ${createTopicFilter(PUBLICATIONS)}\n            <div class="articles-list" id="articlesList">\n                ${createArticlesList(PUBLICATIONS,"/pubblicazioni","",!0)}\n            </div>\n        </div>\n    `}function createFeaturedPage(){return`\n        <div class="featured-page">\n            ${createSearchBar()}\n            ${createTopicFilter(FEATURED)}\n            <div class="articles-list" id="articlesList">\n                ${createArticlesList(FEATURED,"/in-evidenza")}\n            </div>\n        </div>\n    `}function createBodyWithImages(e,n=[]){if(!n||0===n.length)return e;const a=e.split("\n\n"),t=([...n].sort((e,n)=>n.afterParagraph-e.afterParagraph),[]);return a.forEach((e,a)=>{t.push(`<p>${e}</p>`);n.filter(e=>e.afterParagraph===a+1).forEach(e=>{t.push(`<div class="inline-image" style="background-image: url('${e.url}'); background-size: cover; background-position: center; width: 100%; height: 300px; margin: 2rem 0; border-radius: 4px;"></div>`)})}),t.join("")}function createDetailPage(e,n=!1,a="/"){const t=formatDate(e.date),i=e.images?e.images.filter(e=>0===e.afterParagraph):[],r=i.length>0?i[0].url:null,o=r?`style="background-image: url('${r}'); background-size: cover; background-position: center;"`:"",s=`${a}/${e.id}`.replace(/\/+/g,"/"),l=createInternalLink(s),c=`\n      <div class="content-meta${n?" content-meta--center":""}">\n        <p class="content-date">${t}</p>\n        <button class="share-btn" type="button" data-share-title="${e.title}" data-share-url="${l}" aria-label="Condividi questo contenuto">\n          <svg class="share-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"/>\n            <path d="M16 6l-4-4-4 4"/>\n            <path d="M12 2v14"/>\n          </svg>\n          <span class="share-btn-label">Condividi</span>\n        </button>\n      </div>\n    `,d=createBodyWithImages(e.body,e.images),u=REDAZIONE.find(n=>n.name===e.author),p=u?`<a href="${createInternalLink("/redazione/"+u.id)}" data-link>${e.author}</a>`:e.author,v=e.align||"sinistra",h="centro"===v?"text-center":"destra"===v?"text-right":"giustificato"===v?"text-justify":"text-left";return n?`\n        <article class="publication-detail">\n            <a href="${a}" class="back-btn" data-link aria-label="Torna alla lista">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <path d="M19 12H5M12 19l-7-7 7-7"/>\n                </svg>\n            </a>\n            <h2 class="publication-title">${e.title}</h2>\n            <p class="publication-subtitle">${e.subtitle}</p>\n            <p class="publication-author-header"><em>di ${p}</em></p>\n            ${r?`<div class="publication-image" ${o}></div>`:""}\n        ${c}\n            <div class="publication-body ${h}">${d}</div>\n            <p class="publication-author">— ${p}</p>\n            <p class="publication-copyright"><em>Riproduzione riservata</em></p>\n        </article>\n    `:`\n        <article class="article-detail">\n            <a href="${a}" class="back-btn" data-link aria-label="Torna alla lista">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <path d="M19 12H5M12 19l-7-7 7-7"/>\n                </svg>\n            </a>\n            <h2 class="article-title">${e.title}</h2>\n            <p class="article-subtitle">${e.subtitle}</p>\n            <p class="article-author-header"><em>di ${p}</em></p>\n            ${r?`<div class="article-image" ${o}></div>`:""}\n        ${c}\n            <div class="article-body ${h}">${d}</div>\n            <p class="article-author">— ${p}</p>\n            <p class="article-copyright"><em>Riproduzione riservata</em></p>\n        </article>\n    `}function create404Page(){return`\n        <div class="not-found">\n            <div class="not-found-content">\n                <h1>404</h1>\n                <p>Oops! Pagina non trovata</p>\n                <a href="${createInternalLink("/")}" data-link>Torna alla Home</a>\n            </div>\n        </div>\n    `}function createRedattoreCard(e){return`\n        <a href="${createInternalLink("/redazione/"+e.id)}" class="redattore-card" data-link>\n            <div class="redattore-image" style="background-image: url('${e.image}')"></div>\n            <div class="redattore-info">\n                <h3 class="redattore-name">${e.name}</h3>\n                <p class="redattore-bio">${e.bio}</p>\n            </div>\n        </a>\n    `}function createRedazionePage(){return`\n        <div class="redazione-page">\n            <div class="page-header">\n                <h1 class="page-title">Redazione</h1>\n                <p class="page-subtitle">Le voci de il Tafano</p>\n            </div>\n            <div class="redazione-grid">\n                ${REDAZIONE.map(e=>createRedattoreCard(e)).join("")}\n            </div>\n        </div>\n    `}function createRedattoreDetailPage(e){const n=ARTICLES.filter(n=>n.author===e.name),a=PUBLICATIONS.filter(n=>n.author===e.name),t=FEATURED.filter(n=>n.author===e.name),i=[...n,...a,...t];let r="";return r=0===i.length?'<p class="no-results">Questo autore non ha ancora pubblicato contenuti.</p>':i.map(e=>{let n="/articoli",i=!1;return a.includes(e)?(n="/pubblicazioni",i=!0):t.includes(e)&&(n="/in-evidenza"),createContentCard(e,n,i)}).join(""),`\n        <div class="redattore-detail">\n            <a href="${createInternalLink("/redazione")}" class="back-btn" data-link aria-label="Torna alla redazione">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <path d="M19 12H5M12 19l-7-7 7-7"/>\n                </svg>\n            </a>\n            <div class="redattore-header">\n                <div class="redattore-header-image" style="background-image: url('${e.image}')"></div>\n                <div class="redattore-header-info">\n                    <h1 class="redattore-header-name">${e.name}</h1>\n                    <p class="redattore-header-bio">${e.bio}</p>\n                </div>\n            </div>\n            <div class="redattore-content">\n                <h2 class="section-title">Articoli e Pubblicazioni</h2>\n                <div class="articles-list" id="articlesList">\n                    ${r}\n                </div>\n            </div>\n        </div>\n    `}function createContattiPage(){return'\n        <div class="contatti-page">\n            <div class="page-header">\n                <h1 class="page-title">Contattaci</h1>\n            </div>\n            <div class="contatti-content">\n                <p class="contatti-text">\n                    Scrivi alla redazione de <strong>il Tafano</strong>:\n                </p>\n                <p class="contatti-email">\n                    <a href="mailto:redazione@iltafano.it">redazione@iltafano.it</a>\n                </p>\n                <p class="contatti-text">\n                    Ti risponderemo il prima possibile.\n                </p>\n            </div>\n        </div>\n    '}