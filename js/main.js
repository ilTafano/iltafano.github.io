const SITE_UPDATE={date:"Mercoledì, 25 febbraio 2026",time:"23:52"};function openMenu(){const e=document.getElementById("sidebar"),t=document.getElementById("overlay");e.classList.add("open"),t.classList.add("active"),document.body.style.overflow="hidden"}function closeMenu(){const e=document.getElementById("sidebar"),t=document.getElementById("overlay");e.classList.remove("open"),t.classList.remove("active"),document.body.style.overflow=""}function setupMenu(){const e=document.getElementById("menuBtn"),t=document.getElementById("closeBtn"),n=document.getElementById("overlay"),o=document.querySelectorAll(".nav-list a");e.addEventListener("click",openMenu),t.addEventListener("click",closeMenu),n.addEventListener("click",closeMenu),o.forEach(e=>{e.addEventListener("click",closeMenu)})}function setupShareButtons(){document.body.addEventListener("click",async e=>{const t=e.target.closest(".share-btn");if(!t)return;e.preventDefault();const n=t.dataset.shareTitle||document.title,o=t.dataset.shareUrl||window.location.href,i=new URL(o,window.location.origin).href,c=t.querySelector(".share-btn-label"),s=c?c.textContent.trim():t.textContent.trim(),a=async()=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(i),e="Link copiato",c?c.textContent=e:t.textContent=e,t.classList.add("is-shared"),void window.setTimeout(()=>{c?c.textContent=s:t.textContent=s,t.classList.remove("is-shared")},2e3)}catch(e){console.warn("Clipboard non disponibile",e)}var e;window.prompt("Copia il link:",i)};if(navigator.share)try{return void await navigator.share({title:n,url:i})}catch(e){if(e&&"AbortError"===e.name)return;return void await a()}await a()})}function displayDateTime(){const e=document.querySelector(".date-time");e&&(e.innerHTML=`${SITE_UPDATE.date}<span class="dash"> — </span><br class="mobile-break">aggiornato alle ${SITE_UPDATE.time}`)}function init(){setupMenu(),setupShareButtons(),displayDateTime(),"function"==typeof initSearch&&initSearch(),setupTopicFilter(),setupScrollProgress(),console.log("✅ Il Tafano inizializzato correttamente")}function setupScrollProgress(){const e=document.getElementById("scrollProgress");function t(){const t=window.scrollY||document.documentElement.scrollTop,n=document.documentElement.scrollHeight-window.innerHeight;if(n<=0||0===t)return e.style.opacity="0",void(e.style.width="0%");const o=t/n*100;e.style.width=o+"%",e.style.opacity="1"}e&&(window.addEventListener("scroll",t,{passive:!0}),t())}function setupTopicFilter(){document.body.addEventListener("click",e=>{const t=e.target.closest(".topic-chip");if(!t)return;const n=t.dataset.topic,o=document.getElementById("searchInput");if(o){o.value=n;const e=new Event("input",{bubbles:!0});o.dispatchEvent(e),document.querySelectorAll(".topic-chip").forEach(e=>e.classList.remove("active")),t.classList.add("active")}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();