const SITE_UPDATE={date:"Domenica, 22 febbraio 2026",time:"19:12"};function openMenu(){const e=document.getElementById("sidebar"),t=document.getElementById("overlay");e.classList.add("open"),t.classList.add("active"),document.body.style.overflow="hidden"}function closeMenu(){const e=document.getElementById("sidebar"),t=document.getElementById("overlay");e.classList.remove("open"),t.classList.remove("active"),document.body.style.overflow=""}function setupMenu(){const e=document.getElementById("menuBtn"),t=document.getElementById("closeBtn"),n=document.getElementById("overlay"),o=document.querySelectorAll(".nav-list a");e.addEventListener("click",openMenu),t.addEventListener("click",closeMenu),n.addEventListener("click",closeMenu),o.forEach(e=>{e.addEventListener("click",closeMenu)})}function setupShareButtons(){document.body.addEventListener("click",async e=>{const t=e.target.closest(".share-btn");if(!t)return;e.preventDefault();const n=t.dataset.shareTitle||document.title,o=t.dataset.shareUrl||window.location.href,i=new URL(o,window.location.origin).href,a=t.querySelector(".share-btn-label"),c=a?a.textContent.trim():t.textContent.trim(),s=async()=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(i),e="Link copiato",a?a.textContent=e:t.textContent=e,t.classList.add("is-shared"),void window.setTimeout(()=>{a?a.textContent=c:t.textContent=c,t.classList.remove("is-shared")},2e3)}catch(e){console.warn("Clipboard non disponibile",e)}var e;window.prompt("Copia il link:",i)};if(navigator.share)try{return void await navigator.share({title:n,url:i})}catch(e){if(e&&"AbortError"===e.name)return;return void await s()}await s()})}function displayDateTime(){const e=document.querySelector(".date-time");e&&(e.innerHTML=`${SITE_UPDATE.date}<span class="dash"> — </span><br class="mobile-break">aggiornato alle ${SITE_UPDATE.time}`)}function init(){setupMenu(),setupShareButtons(),displayDateTime(),"function"==typeof initSearch&&initSearch(),setupTopicFilter(),console.log("✅ Il Tafano inizializzato correttamente")}function setupTopicFilter(){document.body.addEventListener("click",e=>{const t=e.target.closest(".topic-chip");if(!t)return;const n=t.dataset.topic,o=document.getElementById("searchInput");if(o){o.value=n;const e=new Event("input",{bubbles:!0});o.dispatchEvent(e),document.querySelectorAll(".topic-chip").forEach(e=>e.classList.remove("active")),t.classList.add("active")}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();